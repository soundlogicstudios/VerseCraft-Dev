<!doctype html>
<html lang="en" data-vc-screen="menu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#000000" />
  <title>VerseCraft Dev</title>

  <!-- Engine styles (leave your engine styling in control) -->
  <link rel="stylesheet" href="styles.css?v=1" />

  <!-- Cinematic menu styles -->
  <link rel="stylesheet" href="vc-menu.css?v=1" />

  <style>
    /* IMPORTANT: Do NOT force body/html sizing/overflow here.
       The engine owns layout. We only add overlays. */

    /* Background overlay (engine can still change backgrounds if it wants) */
    #vc-bg{
      position: fixed;
      inset: 0;
      background: #000;
      background-position: center center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 0;
      pointer-events: none;
    }

    /* Menu overlay above everything */
    #vc-menu{
      position: fixed;
      inset: 0;
      z-index: 1000;
      pointer-events: auto;
    }

    /* When game mode, hide menu hard */
    html[data-vc-screen="game"] #vc-menu{
      display: none !important;
      pointer-events: none !important;
    }

    /* Keep the engine content above bg */
    body > *:not(#vc-bg):not(#vc-menu){
      position: relative;
      z-index: 1;
    }
  </style>
</head>

<body>
  <!-- Always-present background layer -->
  <div id="vc-bg"></div>

  <!-- Menu layer -->
  <div id="vc-menu" aria-label="VerseCraft Main Menu">
    <!-- Minimal fallback menu (you can swap to your cinematic markup later) -->
    <div style="min-height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; gap:18px; padding:20px; font-family:-apple-system,system-ui,sans-serif;">
      <div style="font-size:40px; font-weight:800; color:#fff; margin-bottom:6px;">VerseCraft</div>

      <button data-vc-action="start" style="width:min(320px, 86vw); height:56px; border-radius:18px;">Start</button>
      <button data-vc-action="load" style="width:min(320px, 86vw); height:56px; border-radius:18px;">Load Story</button>
      <button data-vc-action="continue" style="width:min(320px, 86vw); height:56px; border-radius:18px;">Continue</button>
    </div>
  </div>

  <!-- Set initial menu splash (no engine modifications) -->
  <script>
    document.documentElement.dataset.vcScreen = "menu";
    const bg = document.getElementById("vc-bg");
    if (bg) {
      bg.style.backgroundImage =
        'url("https://raw.githubusercontent.com/soundlogicstudios/VerseCraft-Media/main/backgrounds/ui/Home_Splash.png")';
    }
  </script>

  <!-- Engine runtime (unchanged) -->
  <script src="app.js"></script>

  <!-- Your existing menu runtime (unchanged) -->
  <script src="menu.js"></script>

  <!-- Patch (wires buttons -> CustomEvent("vc:menu")) -->
  <script<script defer src="patch/menu.patch.js?v=PATCH1"></script>
</body>
</html>