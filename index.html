<!doctype html>
<html lang="en" data-vc-screen="menu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#000000" />
  <title>VerseCraft Dev</title>

  <!-- Preload menu splash -->
  <link rel="preload" as="image" href="https://raw.githubusercontent.com/soundlogicstudios/VerseCraft-Media/main/backgrounds/ui/Home_Splash.png" />

  <!-- Your cinematic menu styles -->
  <link rel="stylesheet" href="vc-menu.css?v=1" />

  <style>
    :root { color-scheme: dark; }
    html, body { height: 100%; margin: 0; background: #000; overflow: hidden; }
    body { -webkit-text-size-adjust: 100%; }

    /* Always-present background layer (menu uses it; engine can overwrite later) */
    #vc-bg{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      background: #000;
      background-position: center center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 0;
    }

    /* Engine mount/root (engine owns whatever it renders inside) */
    #app {
      position: relative;
      z-index: 1;
      width: 100vw;
      height: 100vh;
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }

    /* Menu sits above everything */
    #vc-menu { position: relative; z-index: 10; }

    /* When game mode, hide menu hard */
    html[data-vc-screen="game"] #vc-menu { display: none !important; pointer-events: none !important; }
  </style>
</head>

<body>
  <!-- Background must exist at boot -->
  <div id="vc-bg"></div>

  <!-- Menu must exist at boot -->
  <div id="vc-menu" aria-label="VerseCraft Main Menu">
    <!-- Minimal fallback menu (replace later with your cinematic markup if you want) -->
    <div style="padding:16px; font-family:-apple-system,system-ui,sans-serif; color:#fff;">
      <div style="font-size:28px; font-weight:800; margin: 8px 0 18px;">VerseCraft</div>

      <button data-vc-action="start" style="width:100%; height:56px; border-radius:16px;">Start</button>
      <div style="height:12px;"></div>

      <button data-vc-action="load" style="width:100%; height:56px; border-radius:16px;">Load Story</button>
      <div style="height:12px;"></div>

      <button data-vc-action="continue" style="width:100%; height:56px; border-radius:16px;">Continue</button>
    </div>
  </div>

  <!-- Engine root -->
  <div id="app"></div>

  <!-- Boot state for menu -->
  <script>
    // Ensure menu screen CSS applies immediately
    document.documentElement.dataset.vcScreen = "menu";

    // Apply the splash immediately (engine can overwrite later)
    const bg = document.getElementById("vc-bg");
    if (bg) {
      bg.style.backgroundImage =
        'url("https://raw.githubusercontent.com/soundlogicstudios/VerseCraft-Media/main/backgrounds/ui/Home_Splash.png")';
      bg.style.backgroundSize = "cover";
      bg.style.backgroundPosition = "center center";
      bg.style.backgroundRepeat = "no-repeat";
    }
  </script>

  <!-- âœ… YOUR ENGINE RUNTIME (do not rename unless the file path differs) -->
  <script src="app.js"></script>

  <!-- Menu wiring / handoff -->
  <script defer src="patch/menu.patch.js?v=1"></script>
</body>
</html>